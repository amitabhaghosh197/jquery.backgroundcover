(function(e,t,o){"use strict";var i={poll:true,destroy:o};var r=0;var n="webkit moz ms o".split(" ");var a=e.requestAnimationFrame;var s=e.cancelAnimationFrame;var c;for(var d=0;d<n.length;d++){if(a&&s){break}c=n[d];a=a||e[c+"RequestAnimationFrame"];s=s||e[c+"CancelAnimationFrame"]||e[c+"CancelRequestAnimationFrame"]}if(!a||!s){a=function(t,o){var i=(new Date).getTime();var n=Math.max(0,16-(i-r));var a=e.setTimeout(function(){t(i+n)},n);r=i+n;return a};s=function(t){e.clearTimeout(t)}}function g(e){return t('<img style="position:static;display:block;" src="'+e+'"/>')}function u(e){var o=t('<div style="position:absolute;z-index:-99999999;width:100%;height:100%;" class="background-cover-image"/>');o.append(e);return o}function h(e,t,o){var i,r,n,a,s,c,d,h,p,l;n=t.css("backgroundPositionX");a=t.css("backgroundPositionY");e.propX=s=parseInt(n,10)===100?"right":"left";e.propY=c=parseInt(a,10)===100?"bottom":"top";e.cPropX=d=s==="right"?"marginRight":"marginLeft";e.cPropY=d=s==="bottom"?"marginBottom":"marginTop";e.centerX=p=parseInt(n,10)===50;e.centerY=l=parseInt(a,10)===50;e.src=o?o:t.css("backgroundImage").split(/(\(|\))/)[2];e.img=g(e.src);e.img.css(s,n);e.img.css(c,a);e.img.load(function(){e.imgH=i=e.img.prop("height");e.imgW=r=e.img.prop("width");e.mode=i<r?"landscape":"portrait";e.img.addClass(e.mode);e.ratio=r/i;e.ready=true;t.trigger("coverresize")});t.addClass("background-cover").css({position:"relative",overflow:"hidden",backgroundImage:"none"});e.container=u(e.img);e.container.append(e.img);t.append(e.container)}function p(e){return e.width()/e.height()}function l(e){return e.destroy?" "+e.destroy:""}function m(o,i){var r=i.width(),n=i.height(),s=function(){var e=false,t=i.height(),c=i.width();if(t!==r||c!==n){e=true;r=t;n=c}if(e){i.trigger("coverresize")}if(i.parent().length){o.poll=a(s)}};if(o.options.poll){s()}if(!o.options.poll){o.noPoll=function(){if(!i.parent().length){o.destroy()}i.trigger("coverresize")};t(e).on("resize.backgroundcover orientationchange.backgroundcover",o.noPoll)}i.on("remove destroyed"+l(o.options),function(){o.destroy()});i.on("coverresize resize",function(){var e=p(i),t,r,n,a=o.container.height(),s=o.container.width(),c=0,d=0;if(o.mode==="landscape"){if(e<o.ratio){r=a;n=a*o.ratio}else{r=s/o.ratio;n=s}}if(o.mode==="portrait"){if(e>o.ratio){r=s/o.ratio;n=s}else{r=a;n=a*o.ratio}}d=o.centerX?0-Math.round((n-s)/2):0;c=o.centerY?0-Math.round((r-a)/2):0;t={height:Math.round(r),width:Math.round(n)};t[o.cPropX]=d;t[o.cPropY]=c;o.img.css(t)})}function f(o,i){o.off("coverresize resize orientationchange");o.off("remove destroyed"+l(i.options));if(!i.options.poll){t(e).off("resize.backgroundcover orientationchange.backgroundcover",i.noPoll)}}function v(e,t,o){this.options=o;this.element=e;this.ready=false;h(this,e,t);m(this,e)}v.prototype={destroy:function(){if(this.poll){s(this.poll)}f(this.element,this);if(this.container.length){this.container.empty().remove()}}};t.fn.backgroundcover=function(e,o){var r=t.extend({},i,o||{});return this.each(function(o,i){var n=t(i);n.data("backgroundCover",new v(n,e,r))})}})(this,this.jQuery);